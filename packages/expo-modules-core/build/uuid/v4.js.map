{"version":3,"file":"v4.js","sourceRoot":"","sources":["../../src/uuid/v4.ts"],"names":[],"mappings":"AAAA,OAAO,WAAW,MAAM,mBAAmB,CAAC;AAC5C,OAAO,WAAW,MAAM,mBAAmB,CAAC;AAG5C,MAAM,YAAY,GAAG,UAAU,EAAE,IAAI,EAAE,SAAS,CAAC;AAGjD,MAAM,UAAU,MAAM,CACpB,OAAqC,EACrC,GAAO,EACP,MAAe;IAEf,IAAI,CAAC,YAAY,EAAE;QACjB,MAAM,KAAK,CAAC,iFAAiF,CAAC,CAAC;KAChG;IAED,MAAM,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAErC,IAAI,MAAM,GAAoB,IAAI,CAAC;IAEnC,IAAI,OAAO,OAAO,IAAI,QAAQ,EAAE;QAC9B,MAAM,GAAG,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACrD,OAAO,GAAG,SAAS,CAAC;KACrB;IAED,OAAO,GAAG,OAAO,IAAI,SAAS,CAAC;IAE/B,mBAAmB;IACnB,IAAI,IAAI,GAAa,OAAO,EAAE,MAAM,IAAI,OAAO,EAAE,GAAG,EAAE,CAAC;IAEvD,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,EAAE;QACjB,OAAO,YAAY,EAAE,CAAC;KACvB;SAAM,IAAI,CAAC,IAAI,IAAI,GAAG,EAAE;QACvB,IAAI,GAAG,WAAW,CAAC,YAAY,EAAE,CAAC,CAAC;KACpC;IAED,gEAAgE;IAChE,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IAClC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IAElC,oCAAoC;IACpC,IAAI,MAAM,EAAE;QACV,KAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE;YAC9B,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;SAC3B;KACF;IAED,OAAO,MAAM,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;AACrC,CAAC","sourcesContent":["import bytesToUuid from './lib/bytesToUuid';\nimport uuidToBytes from './lib/uuidToBytes';\nimport { OutputBuffer, V4Options } from './types/uuid.types';\n\nconst nativeUuidv4 = globalThis?.expo?.getUuidv4;\n\nexport function uuidv4(options?: V4Options): string;\nexport function uuidv4<T extends OutputBuffer>(\n  options: V4Options | null | undefined,\n  buf?: T,\n  offset?: number\n) {\n  if (!nativeUuidv4) {\n    throw Error(\"Native UUID type 4 generator implementation wasn't found in `expo-modules-core`\");\n  }\n\n  const i = buf && offset ? offset : 0;\n\n  let buffer: number[] | null = null;\n\n  if (typeof options == 'string') {\n    buffer = options === 'binary' ? new Array(16) : null;\n    options = undefined;\n  }\n\n  options = options || undefined;\n\n  // @ts-expect-error\n  let rnds: number[] = options?.random || options?.rng();\n\n  if (!rnds && !buf) {\n    return nativeUuidv4();\n  } else if (!rnds && buf) {\n    rnds = uuidToBytes(nativeUuidv4());\n  }\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buffer) {\n    for (let ii = 0; ii < 16; ++ii) {\n      buffer[i + ii] = rnds[ii];\n    }\n  }\n\n  return buffer || bytesToUuid(rnds);\n}\n"]}